"use strict";(self.webpackChunkfrontend_ng=self.webpackChunkfrontend_ng||[]).push([[213],{254:(Bd,an,m)=>{m.r(an),m.d(an,{ChatroomModule:()=>Ed});var u=m(6895),W=m(4006),Q=m(9299),M=m(1135),f=m(7579),_t=m(4986),Me=m(4482),he=m(5403),Ue=m(8421);var ie=m(5963),I=m(3900),Nt=m(262),pe=m(9646),y=m(4004);var t=m(4650),Mt=function(n,o){return(Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])})(n,o)};function cn(n,o){function e(){this.constructor=n}Mt(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}function mo(n,o){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var s,a,i=e.call(n),r=[];try{for(;(void 0===o||o-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(c){a={error:c}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return r}var ln=function n(o,e){this.target=e,this.type=o},bo=function(n){function o(e,i){var s=n.call(this,"error",i)||this;return s.message=e.message,s.error=e,s}return cn(o,n),o}(ln),Co=function(n){function o(e,i,s){void 0===e&&(e=1e3),void 0===i&&(i="");var r=n.call(this,"close",s)||this;return r.wasClean=!0,r.code=e,r.reason=i,r}return cn(o,n),o}(ln),se={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1};const No=function(){function n(o,e,i){var s=this;void 0===i&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(r){s._debug("open event");var a=s._options.minUptime,c=void 0===a?se.minUptime:a;clearTimeout(s._connectTimeout),s._uptimeTimeout=setTimeout(function(){return s._acceptOpen()},c),s._ws.binaryType=s._binaryType,s._messageQueue.forEach(function(l){return s._ws.send(l)}),s._messageQueue=[],s.onopen&&s.onopen(r),s._listeners.open.forEach(function(l){return s._callEventListener(r,l)})},this._handleMessage=function(r){s._debug("message event"),s.onmessage&&s.onmessage(r),s._listeners.message.forEach(function(a){return s._callEventListener(r,a)})},this._handleError=function(r){s._debug("error event",r.message),s._disconnect(void 0,"TIMEOUT"===r.message?"timeout":void 0),s.onerror&&s.onerror(r),s._debug("exec error listeners"),s._listeners.error.forEach(function(a){return s._callEventListener(r,a)}),s._connect()},this._handleClose=function(r){s._debug("close event"),s._clearTimeouts(),s._shouldReconnect&&s._connect(),s.onclose&&s.onclose(r),s._listeners.close.forEach(function(a){return s._callEventListener(r,a)})},this._url=o,this._protocols=e,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(o){this._binaryType=o,this._ws&&(this._ws.binaryType=o)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce(function(e,i){return"string"==typeof i?e+=i.length:i instanceof Blob?e+=i.size:e+=i.byteLength,e},0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(o,e){void 0===o&&(o=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(o,e):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},n.prototype.reconnect=function(o,e){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(o,e),this._connect()):this._connect()},n.prototype.send=function(o){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",o),this._ws.send(o);else{var e=this._options.maxEnqueuedMessages;this._messageQueue.length<(void 0===e?se.maxEnqueuedMessages:e)&&(this._debug("enqueue",o),this._messageQueue.push(o))}},n.prototype.addEventListener=function(o,e){this._listeners[o]&&this._listeners[o].push(e)},n.prototype.dispatchEvent=function(o){var e,i,s=this._listeners[o.type];if(s)try{for(var r=function go(n){var o="function"==typeof Symbol&&n[Symbol.iterator],e=0;return o?o.call(n):{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}}}(s),a=r.next();!a.done;a=r.next())this._callEventListener(o,a.value)}catch(l){e={error:l}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return!0},n.prototype.removeEventListener=function(o,e){this._listeners[o]&&(this._listeners[o]=this._listeners[o].filter(function(i){return i!==e}))},n.prototype._debug=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];this._options.debug&&console.log.apply(console,function fo(){for(var n=[],o=0;o<arguments.length;o++)n=n.concat(mo(arguments[o]));return n}(["RWS>"],o))},n.prototype._getNextDelay=function(){var o=this._options,e=o.reconnectionDelayGrowFactor,s=o.minReconnectionDelay,a=o.maxReconnectionDelay,c=void 0===a?se.maxReconnectionDelay:a,l=0;return this._retryCount>0&&(l=(void 0===s?se.minReconnectionDelay:s)*Math.pow(void 0===e?se.reconnectionDelayGrowFactor:e,this._retryCount-1))>c&&(l=c),this._debug("next delay",l),l},n.prototype._wait=function(){var o=this;return new Promise(function(e){setTimeout(e,o._getNextDelay())})},n.prototype._getNextUrl=function(o){if("string"==typeof o)return Promise.resolve(o);if("function"==typeof o){var e=o();if("string"==typeof e)return Promise.resolve(e);if(e.then)return e}throw Error("Invalid URL")},n.prototype._connect=function(){var o=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var e=this._options,i=e.maxRetries,s=void 0===i?se.maxRetries:i,r=e.connectionTimeout,a=void 0===r?se.connectionTimeout:r,c=e.WebSocket,l=void 0===c?function(){if(typeof WebSocket<"u")return WebSocket}():c;if(this._retryCount>=s)return void this._debug("max retries reached",this._retryCount,">=",s);if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!function(n){return typeof n<"u"&&!!n&&2===n.CLOSING}(l))throw Error("No valid WebSocket class provided");this._wait().then(function(){return o._getNextUrl(o._url)}).then(function(g){o._closeCalled||(o._debug("connect",{url:g,protocols:o._protocols}),o._ws=o._protocols?new l(g,o._protocols):new l(g),o._ws.binaryType=o._binaryType,o._connectLock=!1,o._addListeners(),o._connectTimeout=setTimeout(function(){return o._handleTimeout()},a))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new bo(Error("TIMEOUT"),this))},n.prototype._disconnect=function(o,e){if(void 0===o&&(o=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(o,e),this._handleClose(new Co(o,e,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(o,e){"handleEvent"in e?e.handleEvent(o):e(o)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n}();var Mo=m(529),wo=m(7009);class So{constructor(){this.receivedEvtList=[],this.currPageMessage=1,this.currPageDialog=1}get self_id(){return this._self?.pk.toString()}get self_username(){return this._self?.username.toString()}set self(o){this._self=o}}let To=(()=>{class n{constructor(e,i){this.http=e,this.snackbar=i,this.wsUrl="ws://localhost:8000/chat_ws",this.wsOptions={connectionTimeout:1e3,maxRetries:10},this.receivedEvt=new M.X(null),this.state=new So,this.apiUrl="http://localhost:8000/",this.ws=new No(this.wsUrl,[],this.wsOptions),this.ws.onopen=this.onOpen.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onclose=this.onClose.bind(this),this.reqSelf().pipe((0,Nt.K)(s=>(0,pe.of)(null))).subscribe(s=>{null!=s&&(this.state.self=s)})}ngOnInit(){}onMessage(e){console.log(e.data);const i=JSON.parse(e.data);this.state.receivedEvtList.push(i),this.receivedEvt.next(i)}onOpen(){this.snackbar.open("Connected",void 0,{duration:2e3})}onClose(){this.snackbar.open("Disconnected",void 0,{duration:2e3})}reqSelf(){return this.http.get(`${this.apiUrl}self/`)}reqChatrooms(e=0){return this.state.currPageDialog+=e,this.http.get(`${this.apiUrl}dialogs/?page=${this.state.currPageDialog}`)}reqMessages(e=0){return this.state.currPageMessage+=e,this.http.get(`${this.apiUrl}messages/?page=${this.state.currPageMessage}`)}send(e){this.ws.send(JSON.stringify(e))}sendMessage(e){this.ws.send(JSON.stringify({...e,random_id:this.generateRandomId()}))}get receivedEvt$(){return this.receivedEvt.asObservable()}generateRandomId(){const e=Math.random();return-Math.floor(e*Math.pow(2,31))}static#e=this.\u0275fac=function(i){return new(i||n)(t.LFG(Mo.eN),t.LFG(wo.ux))};static#t=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dn=m(6338),Oo=m(6063);class E extends f.x{constructor(o=1/0,e=1/0,i=Oo.l){super(),this._bufferSize=o,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,o),this._windowTime=Math.max(1,e)}next(o){const{isStopped:e,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:r,_windowTime:a}=this;e||(i.push(o),!s&&i.push(r.now()+a)),this._trimBuffer(),super.next(o)}_subscribe(o){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(o),{_infiniteTimeWindow:i,_buffer:s}=this,r=s.slice();for(let a=0;a<r.length&&!o.closed;a+=i?1:2)o.next(r[a]);return this._checkFinalizedStatuses(o),e}_trimBuffer(){const{_bufferSize:o,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:s}=this,r=(s?1:2)*o;if(o<1/0&&r<i.length&&i.splice(0,i.length-r),!s){const a=e.now();let c=0;for(let l=1;l<i.length&&i[l]<=a;l+=2)c=l;c&&i.splice(0,c+1)}}}var Ze=m(9751),V=m(6451),P=m(4968),we=m(515);m(9841),m(4128),m(457),m(6406);var q=m(8675);var C=m(9300),St=m(1884),O=m(3099),d=m(2722),ko=m(7272),ee=m(5698),Po=m(5032),Io=m(9718),Fo=m(5577);function hn(n,o){return o?e=>(0,ko.z)(o.pipe((0,ee.q)(1),function Ro(){return(0,Me.e)((n,o)=>{n.subscribe((0,he.x)(o,Po.Z))})}()),e.pipe(hn(n))):(0,Fo.z)((e,i)=>(0,Ue.Xf)(n(e,i)).pipe((0,ee.q)(1),(0,Io.h)(e)))}function Tt(n,o=_t.z){const e=(0,ie.H)(n,o);return hn(()=>e)}function Ot(n){let e,o=1/0;return null!=n&&("object"==typeof n?({count:o=1/0,delay:e}=n):o=n),o<=0?()=>we.E:(0,Me.e)((i,s)=>{let a,r=0;const c=()=>{if(a?.unsubscribe(),a=null,null!=e){const g="number"==typeof e?(0,ie.H)(e):(0,Ue.Xf)(e(r)),b=(0,he.x)(s,()=>{b.unsubscribe(),l()});g.subscribe(b)}else l()},l=()=>{let g=!1;a=i.subscribe((0,he.x)(s,void 0,()=>{++r<o?a?c():g=!0:s.complete()})),g&&c()};l()})}var qe=m(8372),pn=m(2529);m(4033),m(576),m(8343);var Ke=m(8746),re=(m(8505),m(5363),m(2687)),Dt=m(4080),Te=m(6270),G=m(8184),xt=m(3353),ge=m(1481),_=m(7340);m(445),m(1281),m(5017),m(9521);const k=["*"],rs=["nbButton",""];function Ar(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"span",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.removeFile(s))}),t._uU(2,"\xd7"),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.Udp("background-image",e.urlStyle)}}function Hr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t._UZ(1,"nb-icon",9),t.TgZ(2,"span",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.removeFile(s))}),t._uU(3,"\xd7"),t.qZA()()}}function Vr(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Ar,3,2,"div",6),t.YNc(2,Hr,4,0,"div",7),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.urlStyle),t.xp6(1),t.Q6J("ngIf",!e.urlStyle)}}function $r(n,o){if(1&n&&(t.TgZ(0,"div",4),t.YNc(1,Vr,3,2,"ng-container",5),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.droppedFiles)}}function zr(n,o){if(1&n&&t._UZ(0,"nb-icon",13),2&n){const e=t.oxw(2);t.Q6J("icon",e.buttonIcon)}}function Lr(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw(2);t.Oqu(e.buttonTitle)}}function jr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.sendMessage())}),t.YNc(1,zr,1,1,"nb-icon",11),t.YNc(2,Lr,1,1,"ng-template",null,12,t.W1O),t.qZA()}if(2&n){const e=t.MAs(3),i=t.oxw();t.ekj("with-icon",!i.buttonTitle),t.Q6J("status",i.getButtonStatus()),t.xp6(1),t.Q6J("ngIf",!i.buttonTitle)("ngIfElse",e)}}function Yr(n,o){if(1&n&&(t.TgZ(0,"p",2),t._uU(1),t.TgZ(2,"time"),t._uU(3),t.ALo(4,"date"),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.hij("",e.sender," "),t.xp6(2),t.Oqu(t.xi3(4,2,e.date,e.dateFormat))}}function Wr(n,o){if(1&n&&(t.TgZ(0,"p",3),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.message)}}function Gr(n,o){if(1&n&&t._UZ(0,"nb-icon",7),2&n){const e=t.oxw().$implicit;t.Q6J("icon",e.icon)}}function Ur(n,o){if(1&n&&t._UZ(0,"div"),2&n){const e=t.oxw().$implicit;t.Udp("background-image",e.urlStyle)}}function Zr(n,o){if(1&n&&(t.TgZ(0,"a",4),t.YNc(1,Gr,1,1,"nb-icon",5),t.YNc(2,Ur,1,2,"div",6),t.qZA()),2&n){const e=o.$implicit;t.Q6J("href",e.url,t.LSH),t.xp6(1),t.Q6J("ngIf",!e.urlStyle&&e.icon),t.xp6(1),t.Q6J("ngIf",e.urlStyle)}}function Qr(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",2),t.YNc(2,Zr,3,3,"a",3),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.readyFiles)}}function qr(n,o){if(1&n&&t._UZ(0,"nb-icon",7),2&n){const e=t.oxw(2);t.Q6J("icon",e.readyFiles[0].icon)}}function Jr(n,o){if(1&n&&t._UZ(0,"div"),2&n){const e=t.oxw(2);t.Udp("background-image",e.readyFiles[0].urlStyle)}}function Kr(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"a",4),t.YNc(2,qr,1,1,"nb-icon",5),t.YNc(3,Jr,1,2,"div",6),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("href",e.readyFiles[0].url,t.LSH),t.xp6(1),t.Q6J("ngIf",!e.readyFiles[0].urlStyle&&e.readyFiles[0].icon),t.xp6(1),t.Q6J("ngIf",e.readyFiles[0].urlStyle)}}function Xr(n,o){if(1&n&&(t.TgZ(0,"p",3),t._uU(1),t.TgZ(2,"time"),t._uU(3),t.ALo(4,"date"),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.hij("",e.sender," "),t.xp6(2),t.Oqu(t.xi3(4,2,e.date,e.dateFormat))}}const ea=function(n){return[n]};function ta(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.initials," ")}}function na(n,o){if(1&n&&t._UZ(0,"nb-chat-avatar",4),2&n){const e=t.oxw();t.Q6J("initials",e.getInitials())("avatarStyle",e.avatarStyle)}}function ia(n,o){if(1&n&&t._UZ(0,"nb-chat-message-file",10),2&n){const e=t.oxw(2);t.Q6J("sender",e.sender)("date",e.date)("dateFormat",e.dateFormat)("message",e.message)("files",e.files)}}function oa(n,o){if(1&n&&t._UZ(0,"nb-chat-message-quote",11),2&n){const e=t.oxw(2);t.Q6J("sender",e.sender)("date",e.date)("dateFormat",e.dateFormat)("message",e.message)("quote",e.quote)}}function sa(n,o){if(1&n&&t._UZ(0,"nb-chat-message-map",12),2&n){const e=t.oxw(2);t.Q6J("sender",e.sender)("date",e.date)("message",e.message)("latitude",e.latitude)("longitude",e.longitude)}}function ra(n,o){if(1&n&&t._UZ(0,"nb-chat-message-text",13),2&n){const e=t.oxw(2);t.Q6J("sender",e.sender)("date",e.date)("dateFormat",e.dateFormat)("message",e.message)}}function aa(n,o){if(1&n&&(t.ynx(0,5),t.YNc(1,ia,1,5,"nb-chat-message-file",6),t.YNc(2,oa,1,5,"nb-chat-message-quote",7),t.YNc(3,sa,1,5,"nb-chat-message-map",8),t.YNc(4,ra,1,4,"nb-chat-message-text",9),t.BQk()),2&n){const e=t.oxw();t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","file"),t.xp6(1),t.Q6J("ngSwitchCase","quote"),t.xp6(1),t.Q6J("ngSwitchCase","map")}}function ca(n,o){if(1&n&&(t._UZ(0,"nb-chat-message-text",13),t.TgZ(1,"div"),t.GkF(2,14),t.qZA()),2&n){const e=t.oxw();t.Q6J("sender",e.sender)("date",e.date)("dateFormat",e.dateFormat)("message",e.message),t.xp6(1),t.ekj("nb-custom-message",e._areDefaultStylesEnabled())("nb-custom-message-no-space",e._addNoSpaceClass)("nb-custom-message-reply",e._addReplyClass)("nb-custom-message-not-reply",e._addNotReplyClass)("nb-custom-message-full-width",!e._areDefaultStylesEnabled()),t.xp6(1),t.Q6J("ngTemplateOutlet",e._getTemplate())("ngTemplateOutletContext",e._getTemplateContext())}}const la=["scrollable"],Dn=function(n){return{$implicit:n}};function da(n,o){if(1&n&&t.GkF(0,8),2&n){const e=t.oxw();t.Q6J("ngTemplateOutlet",e.titleTemplate.templateRef)("ngTemplateOutletContext",t.VKq(2,Dn,e.titleTemplate.context))}}function ua(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw();t.hij(" ",e.title," ")}}function ha(n,o){if(1&n&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.noMessagesPlaceholder)}}const pa=[[["nb-chat-message"]],[["nb-chat-form"]]],ga=["nb-chat-message","nb-chat-form"],Rn=new t.OlP("Nebular Theme Options"),In=new t.OlP("Nebular Media Breakpoints"),Fn=new t.OlP("Nebular Built-in JS Themes"),En=new t.OlP("Nebular JS Themes"),Be=new t.OlP("Window"),F=new t.OlP("Document"),dc=[{name:"xs",width:0},{name:"is",width:400},{name:"sm",width:576},{name:"md",width:768},{name:"lg",width:992},{name:"xl",width:1200},{name:"xxl",width:1400},{name:"xxxl",width:1600}];let Bn=(()=>{class n{constructor(e){this.breakpoints=e,this.breakpointsMap=this.breakpoints.reduce((i,s)=>(i[s.name]=s.width,i),{})}getByWidth(e){const i={name:"unknown",width:e},s=this.getBreakpoints();return s.find((r,a)=>{const c=s[a+1];return e>=r.width&&(!c||e<c.width)})||i}getByName(e){return this.getBreakpoints().find(r=>e===r.name)||{name:"unknown",width:NaN}}getBreakpoints(){return this.breakpoints}getBreakpointsMap(){return this.breakpointsMap}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(In))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const mc=[{name:"default",variables:{fontMain:"Open Sans, sans-serif",fontSecondary:"Raleway, sans-serif",bg:"#ffffff",bg2:"#f7f9fc",bg3:"#edf1f7",bg4:"#e4e9f2",border:"#ffffff",border2:"#f7f9fc",border3:"#edf1f7",border4:"#e4e9f2",border5:"#c5cee0",fg:"#8f9bb3",fgHeading:"#1a2138",fgText:"#1a2138",fgHighlight:"#3366ff",layoutBg:"#f7f9fc",separator:"#edf1f7",primary:"#3366ff",success:"#00d68f",info:"#0095ff",warning:"#ffaa00",danger:"#ff3d71",primaryLight:"#598bff",successLight:"#2ce69b",infoLight:"#42aaff",warningLight:"#ffc94d",dangerLight:"#ff708d"}},{name:"cosmic",variables:{fontMain:"Open Sans, sans-serif",fontSecondary:"Raleway, sans-serif",bg:"#323259",bg2:"#252547",bg3:"#1b1b38",bg4:"#13132b",border:"#323259",border2:"#252547",border3:"#1b1b38",border4:"#13132b",border5:"#13132b",fg:"#b4b4db",fgHeading:"#ffffff",fgText:"#ffffff",fgHighlight:"#a16eff",layoutBg:"#151a30",separator:"#151a30",primary:"#a16eff",success:"#00d68f",info:"#0095ff",warning:"#ffaa00",danger:"#ff3d71",primaryLight:"#b18aff",successLight:"#2ce69b",infoLight:"#42aaff",warningLight:"#ffc94d",dangerLight:"#ff708d"}},{name:"corporate",base:"default",variables:{fontMain:"Open Sans, sans-serif",fontSecondary:"Raleway, sans-serif",bg:"#ffffff",bg2:"#f7f9fc",bg3:"#edf1f7",bg4:"#e4e9f2",border:"#ffffff",border2:"#f7f9fc",border3:"#edf1f7",border4:"#e4e9f2",border5:"#c5cee0",fg:"#8f9bb3",fgHeading:"#1a2138",fgText:"#1a2138",fgHighlight:"#73a1ff",layoutBg:"#f7f9fc",separator:"#edf1f7",primary:"#73a1ff",success:"#5dcfe3",info:"#ba7fec",warning:"#ffa36b",danger:"#ff6b83",primaryLight:"#598bff",successLight:"#2ce69b",infoLight:"#42aaff",warningLight:"#ffc94d",dangerLight:"#ff708d"}},{name:"dark",variables:{fontMain:"Open Sans, sans-serif",fontSecondary:"Raleway, sans-serif",bg:"#222b45",bg2:"#1a2138",bg3:"#151a30",bg4:"#101426",border:"#222b45",border2:"#1a2138",border3:"#151a30",border4:"#101426",border5:"#101426",fg:"#8f9bb3",fgHeading:"#ffffff",fgText:"#ffffff",fgHighlight:"#3366ff",layoutBg:"#1b1b38",separator:"#1b1b38",primary:"#3366ff",success:"#00d68f",info:"#0095ff",warning:"#ffaa00",danger:"#ff3d71",primaryLight:"#598bff",successLight:"#2ce69b",infoLight:"#42aaff",warningLight:"#ffc94d",dangerLight:"#ff708d"}}];let An=(()=>{class n{constructor(e,i=[]){this.themes={},this.combineByNames(i,e).forEach(r=>{this.register(r,r.name,r.base)})}register(e,i,s){const r=this.has(s)?this.get(s):{};this.themes[i]=this.mergeDeep({},r,e)}has(e){return!!this.themes[e]}get(e){if(!this.themes[e])throw Error(`NbThemeConfig: no theme '${e}' found registered.`);return JSON.parse(JSON.stringify(this.themes[e]))}combineByNames(e,i){if(e){const s=[];return e.forEach(r=>{const a=i.find(l=>l.name===r.name)||{},c=this.mergeDeep({},a,r);s.push(c)}),i.forEach(r=>{s.find(a=>a.name===r.name)||s.push(r)}),s}return i}isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}mergeDeep(e,...i){if(!i.length)return e;const s=i.shift();if(this.isObject(e)&&this.isObject(s))for(const r in s)this.isObject(s[r])?(e[r]||Object.assign(e,{[r]:{}}),this.mergeDeep(e[r],s[r])):Object.assign(e,{[r]:s[r]});return this.mergeDeep(e,...i)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Fn),t.LFG(En))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Bt=(()=>{class n{constructor(e,i,s){this.options=e,this.breakpointService=i,this.jsThemesRegistry=s,this.themeChanges$=new E(1),this.appendLayoutClass$=new f.x,this.removeLayoutClass$=new f.x,this.changeWindowWidth$=new E(2),e&&e.name&&this.changeTheme(e.name)}changeTheme(e){this.themeChanges$.next({name:e,previous:this.currentTheme}),this.currentTheme=e}changeWindowWidth(e){this.changeWindowWidth$.next(e)}getJsTheme(){return this.onThemeChange().pipe((0,y.U)(e=>this.jsThemesRegistry.get(e.name)))}onMediaQueryChange(){return this.changeWindowWidth$.pipe((0,q.O)(void 0),function un(){return(0,Me.e)((n,o)=>{let e,i=!1;n.subscribe((0,he.x)(o,s=>{const r=e;e=s,i&&o.next([r,s]),i=!0}))})}(),(0,y.U)(([e,i])=>[this.breakpointService.getByWidth(e),this.breakpointService.getByWidth(i)]),(0,C.h)(([e,i])=>e.name!==i.name),(0,St.x)(null,e=>e[0].name+e[1].name),(0,O.B)())}onThemeChange(){return this.themeChanges$.pipe((0,O.B)())}appendLayoutClass(e){this.appendLayoutClass$.next(e)}onAppendLayoutClass(){return this.appendLayoutClass$.pipe((0,O.B)())}removeLayoutClass(e){this.removeLayoutClass$.next(e)}onRemoveLayoutClass(){return this.removeLayoutClass$.pipe((0,O.B)())}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Rn),t.LFG(Bn),t.LFG(An))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Hn=(()=>{class n{constructor(e){this.document=e,this.loaders=[],this.selector="nb-global-spinner"}registerLoader(e){this.loaders.push(e)}clear(){this.loaders=[]}load(){this.showSpinner(),this.executeAll()}executeAll(e=(i=>{})){Promise.all(this.loaders).then(i=>{this.hideSpinner(),e.call(null,i)}).catch(i=>{console.error(i)})}showSpinner(){const e=this.getSpinnerElement();e&&(e.style.display="block")}hideSpinner(){const e=this.getSpinnerElement();e&&(e.style.display="none")}getSpinnerElement(){return this.document.getElementById(this.selector)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(F))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var B=(()=>{return(n=B||(B={})).LTR="ltr",n.RTL="rtl",B;var n})();const Vn=new t.OlP("Layout direction");let K=(()=>{class n{constructor(e=B.LTR){this.direction=e,this.$directionChange=new E(1),this.setDirection(e)}isLtr(){return this.direction===B.LTR}isRtl(){return this.direction===B.RTL}getDirection(){return this.direction}setDirection(e){this.direction=e,this.$directionChange.next(e)}onDirectionChange(){return this.$directionChange.pipe((0,O.B)())}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Vn,8))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),le=(()=>{class n{constructor(){this.scrollPositionReq$=new f.x,this.manualScroll$=new f.x,this.scroll$=new f.x,this.scrollable$=new f.x}getPosition(){return new Ze.y(e=>{const i=new f.x;return i.subscribe(e),this.scrollPositionReq$.next({listener:i}),()=>i.complete()})}scrollTo(e=null,i=null){this.manualScroll$.next({x:e,y:i})}onScroll(){return this.scroll$.pipe((0,O.B)())}onManualScroll(){return this.manualScroll$.pipe((0,O.B)())}onGetPosition(){return this.scrollPositionReq$}onScrollableChange(){return this.scrollable$.pipe((0,O.B)())}fireScrollChange(e){this.scroll$.next(e)}scrollable(e){this.scrollable$.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),rt=(()=>{class n{constructor(){this.contentDimensionsReq$=new f.x}getDimensions(){return new Ze.y(e=>{const i=new f.x;return i.subscribe(e),this.contentDimensionsReq$.next({listener:i}),()=>i.complete()})}onGetDimensions(){return this.contentDimensionsReq$}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),at=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,W.u5,Q.Bz]}),n})();class fc extends re.iQ{constructor(o,e,i,s,r){super(o,e,i,s,r),this.element=o,this.checker=e,this.ngZone=i,this.document=s,this.savePreviouslyFocusedElement()}restoreFocus(){this.previouslyFocusedElement.focus(),this.destroy()}blurPreviouslyFocusedElement(){this.previouslyFocusedElement.blur()}savePreviouslyFocusedElement(){this.previouslyFocusedElement=this.document.activeElement}}let bc=(()=>{class n extends re.qV{constructor(e,i,s){super(e,i,s),this.checker=e,this.ngZone=i,this.document=s}create(e,i){return new fc(e,this.checker,this.ngZone,this.document,i)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(re.ic),t.LFG(t.R0b),t.LFG(F))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();class Cc extends re.Em{}class At{create(o){return new Cc(o)}}class vc extends re.s1{}class Ht{create(o){return new vc(o)}}let He=(()=>{class n extends re.tE{}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),_c=(()=>{class n{static forRoot(){return{ngModule:n,providers:[bc,At,Ht,{provide:He,useClass:re.tE}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})(),$n=(()=>{class n extends G.aV{}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),zn=(()=>{class n extends G.wJ{}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Ln=(()=>{class n extends G.Xj{}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();class yc extends G._G{}const Nc=[G.U8,Dt.eL];let $t=(()=>{class n{static forRoot(){return{ngModule:n,providers:[$n,zn]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Nc,G.U8,Dt.eL]}),n})();var w=(()=>{return(n=w||(w={})).TOP_START="top-start",n.TOP_END="top-end",n.BOTTOM_START="bottom-start",n.BOTTOM_END="bottom-end",w;var n})(),T=(()=>{return(n=T||(T={})).TOP_RIGHT="top-right",n.TOP_LEFT="top-left",n.BOTTOM_RIGHT="bottom-right",n.BOTTOM_LEFT="bottom-left",T;var n})();let Mc=(()=>{class n{constructor(e){this.layoutDirection=e}toLogicalPosition(e){return Object.values(w).includes(e)?e:this.layoutDirection.isLtr()?this.toLogicalPositionWhenLtr(e):this.toLogicalPositionWhenRtl(e)}toPhysicalPosition(e){return Object.values(T).includes(e)?e:this.layoutDirection.isLtr()?this.toPhysicalPositionWhenLtr(e):this.toPhysicalPositionWhenRtl(e)}isTopPosition(e){const i=this.toLogicalPosition(e);return i===w.TOP_END||i===w.TOP_START}isRightPosition(e){const i=this.toPhysicalPosition(e);return i===T.TOP_RIGHT||i===T.BOTTOM_RIGHT}toLogicalPositionWhenLtr(e){switch(e){case T.TOP_RIGHT:return w.TOP_END;case T.TOP_LEFT:return w.TOP_START;case T.BOTTOM_RIGHT:return w.BOTTOM_END;case T.BOTTOM_LEFT:return w.BOTTOM_START}}toLogicalPositionWhenRtl(e){switch(e){case T.TOP_RIGHT:return w.TOP_START;case T.TOP_LEFT:return w.TOP_END;case T.BOTTOM_RIGHT:return w.BOTTOM_START;case T.BOTTOM_LEFT:return w.BOTTOM_END}}toPhysicalPositionWhenLtr(e){switch(e){case w.TOP_START:return T.TOP_LEFT;case w.TOP_END:return T.TOP_RIGHT;case w.BOTTOM_START:return T.BOTTOM_LEFT;case w.BOTTOM_END:return T.BOTTOM_RIGHT}}toPhysicalPositionWhenRtl(e){switch(e){case w.TOP_START:return T.TOP_RIGHT;case w.TOP_END:return T.TOP_LEFT;case w.BOTTOM_START:return T.BOTTOM_RIGHT;case w.BOTTOM_END:return T.BOTTOM_LEFT}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(K))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n extends xt.t4{}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:function(o){return xt.t4.\u0275fac(o)},providedIn:"root"}),n})(),Ne=(()=>{class n extends Te.rL{constructor(e,i,s,r,a){super(e,i,a),this.ruler=s,this.scroll=r}getViewportSize(){let e;return this.ruler.getDimensions().pipe((0,y.U)(i=>({width:i.clientWidth,height:i.clientHeight}))).subscribe(i=>e=i),e}getViewportScrollPosition(){let e;return this.scroll.getPosition().pipe((0,y.U)(i=>({top:i.y,left:i.x}))).subscribe(i=>e=i),e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Ve),t.LFG(t.R0b),t.LFG(rt),t.LFG(le),t.LFG(F))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n extends Ln{setContainer(e){this.container=e}clearContainer(){this.container=null,this._containerElement=null}_createContainer(){this.checkContainer();const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),this.container.appendChild(e),this._containerElement=e}checkContainer(){this.container||function wc(){throw new Error("[NbOverlayContainerAdapter]: Layout not found.\n  When using Nebular '<nb-layout>' is required and should wrap other nebular components.")}()}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var z=(()=>{return(n=z||(z={})).NOOP="noop",n.CLOCKWISE="clockwise",n.COUNTERCLOCKWISE="counterclockwise",n.VERTICAL="vertical",n.HORIZONTAL="horizontal",z;var n})(),p=(()=>{return(n=p||(p={})).TOP="top",n.BOTTOM="bottom",n.LEFT="left",n.RIGHT="right",n.START="start",n.END="end",n.TOP_END="top-end",n.TOP_START="top-start",n.BOTTOM_END="bottom-end",n.BOTTOM_START="bottom-start",n.END_TOP="end-top",n.END_BOTTOM="end-bottom",n.START_TOP="start-top",n.START_BOTTOM="start-bottom",p;var n})();const jn={[p.RIGHT]:n=>({originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:n}),[p.BOTTOM]:n=>({originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:n}),[p.LEFT]:n=>({originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:-n}),[p.TOP]:n=>({originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-n}),[p.START](n){return this[p.LEFT](n)},[p.END](n){return this[p.RIGHT](n)},[p.END_TOP]:n=>({originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom",offsetX:n}),[p.END_BOTTOM]:n=>({originX:"end",originY:"top",overlayX:"start",overlayY:"top",offsetX:n}),[p.BOTTOM_START]:n=>({originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetY:n}),[p.BOTTOM_END]:n=>({originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:n}),[p.START_TOP]:n=>({originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom",offsetX:-n}),[p.START_BOTTOM]:n=>({originX:"start",originY:"top",overlayX:"end",overlayY:"top",offsetX:-n}),[p.TOP_START]:n=>({originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",offsetY:-n}),[p.TOP_END]:n=>({originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-n})},Sc={...jn,[p.RIGHT]:n=>({originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:n}),[p.LEFT]:n=>({originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:-n}),[p.START](n){return this[p.RIGHT](n)},[p.END](n){return this[p.LEFT](n)}},Tc=[p.TOP,p.TOP_END,p.TOP_START,p.START,p.START_TOP,p.START_BOTTOM,p.BOTTOM,p.BOTTOM_START,p.BOTTOM_END,p.END,p.END_BOTTOM,p.END_TOP],Oc=[p.TOP,p.TOP_START,p.TOP_END,p.END,p.END_TOP,p.END_BOTTOM,p.BOTTOM,p.BOTTOM_END,p.BOTTOM_START,p.START,p.START_BOTTOM,p.START_TOP],Dc=[p.BOTTOM,p.TOP],xc=[p.START,p.END];class Pc extends yc{constructor(){super(...arguments),this._offset=15,this.positionChange=this.positionChanges.pipe((0,y.U)(o=>o.connectionPair),(0,y.U)(o=>this.appliedPositions.find(({connectedPosition:e})=>function kc(n,o){return n.originX===o.originX&&n.originY===o.originY&&n.overlayX===o.overlayX&&n.overlayY===o.overlayY}(e,o)).key))}attach(o){this.applyPositions(),super.attach(o)}direction(o){return this._direction=o,this}apply(){this.applyPositions(),super.apply()}position(o){return this._position=o,this}adjustment(o){return this._adjustment=o,this}offset(o){return this._offset=o,this}applyPositions(){const o=this.createPositions();this.persistChosenPositions(o),this.withPositions(this.appliedPositions.map(({connectedPosition:e})=>e))}createPositions(){switch(this._adjustment){case z.NOOP:return[this._position];case z.CLOCKWISE:return this.reorderPreferredPositions(Oc);case z.COUNTERCLOCKWISE:return this.reorderPreferredPositions(Tc);case z.HORIZONTAL:return this.reorderPreferredPositions(xc);case z.VERTICAL:return this.reorderPreferredPositions(Dc)}}mapToLogicalPosition(o){return o===p.LEFT?this._direction===B.LTR?p.START:p.END:o===p.RIGHT?this._direction===B.LTR?p.END:p.START:o}persistChosenPositions(o){const e=this._direction===B.RTL?Sc:jn;this.appliedPositions=o.map(i=>({key:i,connectedPosition:e[i](this._offset)}))}reorderPreferredPositions(o){const e=this.mapToLogicalPosition(this._position),i=o.indexOf(e),s=o.slice(i),r=o.slice(0,i);return s.concat(r)}}class Rc extends G.C4{position(o){switch(o){case w.TOP_START:return this.top().left();case w.TOP_END:return this.top().right();case w.BOTTOM_START:return this.bottom().left();case w.BOTTOM_END:return this.bottom().right()}}}let ct=(()=>{class n{constructor(e,i,s,r,a){this.document=e,this.viewportRuler=i,this.platform=s,this.positionBuilder=r,this.overlayContainer=a}global(){return new Rc}connectedTo(e){return new Pc(e,this.viewportRuler,this.document,this.platform,this.overlayContainer).withFlexibleDimensions(!1).withPush(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(F),t.LFG(Ne),t.LFG(Ve),t.LFG(zn),t.LFG($e))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),lt=(()=>{class n{constructor(e,i){this.overlay=e,this.layoutDirection=i}get scrollStrategies(){return this.overlay.scrollStrategies}create(e){const i=this.overlay.create(e);return this.layoutDirection.onDirectionChange().subscribe(s=>i.setDirection(s)),i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG($n),t.LFG(K))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Yn=(()=>{class n extends Te.mF{constructor(e,i,s,r){super(e,i,r),this.scrollService=s}scrolled(e){return(0,V.T)(super.scrolled(e),this.scrollService.onScroll())}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t.R0b),t.LFG(Ve),t.LFG(le),t.LFG(F))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Wn=(()=>{class n extends G.BS{constructor(e,i,s){super(i,e),this.scrollService=s}enable(){super.enable(),this.scrollService.scrollable(!1)}disable(){super.disable(),this.scrollService.scrollable(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(F),t.LFG(Ne),t.LFG(le))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Gn=(()=>{class n extends G.uw{constructor(e,i,s,r,a){super(i,s,r,a),this.scrollService=e,this.scrollDispatcher=i,this.viewportRuler=s,this.ngZone=r,this.document=a,this.block=()=>new Wn(this.document,this.viewportRuler,this.scrollService)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(le),t.LFG(Te.mF),t.LFG(Ne),t.LFG(t.R0b),t.LFG(F))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Un=(()=>{class n{static forRoot(){return{ngModule:n,providers:[Ne,$e,Wn,Yn,Gn,{provide:G.Xj,useExisting:$e},{provide:Ln,useExisting:$e},{provide:Te.mF,useExisting:Yn},{provide:G.uw,useExisting:Gn}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();var L=(()=>{return(n=L||(L={})).NOOP="noop",n.CLICK="click",n.HOVER="hover",n.HINT="hint",n.FOCUS="focus",L;var n})();class ze{destroy(){this.destroyed$.next()}isNotOnHostOrContainer(o){return!this.isOnHost(o)&&!this.isOnContainer(o)}isOnHostOrContainer(o){return this.isOnHost(o)||this.isOnContainer(o)}isOnHost(o){return this.host.contains(o)}isOnContainer(o){return this.container()&&this.container().location.nativeElement.contains(o)}constructor(o,e,i){this.document=o,this.host=e,this.container=i,this.destroyed$=new f.x}}class Ic extends ze{constructor(){super(...arguments),this.click$=(0,P.R)(this.document,"click").pipe((0,y.U)(o=>[!this.container()&&this.isOnHost(o.target),o]),(0,O.B)(),(0,d.R)(this.destroyed$)),this.show$=this.click$.pipe((0,C.h)(([o])=>o),(0,y.U)(([,o])=>o),(0,d.R)(this.destroyed$)),this.hide$=this.click$.pipe((0,C.h)(([o,e])=>!o&&!this.isOnContainer(e.target)),(0,y.U)(([,o])=>o),(0,d.R)(this.destroyed$))}}class Fc extends ze{constructor(){super(...arguments),this.show$=(0,P.R)(this.host,"mouseenter").pipe((0,C.h)(()=>!this.container()),Tt(100),(0,d.R)((0,P.R)(this.host,"mouseleave")),Ot(),(0,d.R)(this.destroyed$)),this.hide$=(0,P.R)(this.host,"mouseleave").pipe((0,I.w)(()=>(0,P.R)(this.document,"mousemove").pipe((0,qe.b)(100),(0,pn.o)(()=>!!this.container()),(0,C.h)(o=>this.isNotOnHostOrContainer(o.target)))),(0,d.R)(this.destroyed$))}}class Ec extends ze{constructor(){super(...arguments),this.show$=(0,P.R)(this.host,"mouseenter").pipe(Tt(100),(0,d.R)((0,P.R)(this.host,"mouseleave")),Ot(),(0,d.R)(this.destroyed$)),this.hide$=(0,P.R)(this.host,"mouseleave").pipe((0,d.R)(this.destroyed$))}}class Bc extends ze{constructor(){super(...arguments),this.focusOut$=(0,P.R)(this.host,"focusout").pipe((0,I.w)(()=>(0,P.R)(this.document,"focusin").pipe((0,pn.o)(()=>!!this.container()),(0,C.h)(o=>this.isNotOnHostOrContainer(o.target)))),(0,d.R)(this.destroyed$)),this.clickIn$=(0,P.R)(this.host,"click").pipe((0,C.h)(()=>!this.container()),(0,d.R)(this.destroyed$)),this.clickOut$=(0,P.R)(this.document,"click").pipe((0,C.h)(()=>!!this.container()),(0,C.h)(o=>!!this.isNotOnHostOrContainer(o.target)&&this.isNotOnHostOrContainer(this.document.activeElement)),(0,d.R)(this.destroyed$)),this.tabKeyPress$=(0,P.R)(this.document,"keydown").pipe((0,C.h)(o=>9===o.keyCode),(0,C.h)(()=>!!this.container()),(0,d.R)(this.destroyed$)),this.show$=(0,V.T)((0,P.R)(this.host,"focusin"),this.clickIn$).pipe((0,C.h)(()=>!this.container()),(0,qe.b)(100),(0,d.R)((0,P.R)(this.host,"focusout")),Ot(),(0,d.R)(this.destroyed$)),this.hide$=(0,V.T)(this.focusOut$,this.tabKeyPress$,this.clickOut$).pipe((0,d.R)(this.destroyed$))}}class Ac extends ze{constructor(){super(...arguments),this.show$=we.E,this.hide$=we.E}}let dt=(()=>{class n{constructor(e){this._document=e}trigger(e){return this._trigger=e,this}host(e){return this._host=e,this}container(e){return this._container=e,this}build(){switch(this._trigger){case L.CLICK:return new Ic(this._document,this._host,this._container);case L.HINT:return new Ec(this._document,this._host,this._container);case L.HOVER:return new Fc(this._document,this._host,this._container);case L.FOCUS:return new Bc(this._document,this._host,this._container);case L.NOOP:return new Ac(this._document,this._host,this._container);default:throw new Error("Trigger have to be provided")}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(F))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Hc=(()=>{class n{static forRoot(){return{ngModule:n,providers:[ct,dt,lt,Mc,...$t.forRoot().providers,...Un.forRoot().providers,..._c.forRoot().providers]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[$t,at,$t,Un]}),n})(),j=(()=>{class n{constructor(){this.coreStatuses=["basic","primary","info","warning","danger","control"]}isCoreStatus(e){return this.coreStatuses.includes(e)}isCustomStatus(e){return!!this.isValidStatusString(e)&&!this.isCoreStatus(e)}getStatusClass(e){if(this.isValidStatusString(e))return`status-${e}`}isValidStatusString(e){return"string"==typeof e&&e.length>0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();function Vc(n){if((0,u.NF)(n))return window}let $c=(()=>{class n{static forRoot(e={name:"default"},i,s,r){return{ngModule:n,providers:[{provide:Rn,useValue:e||{}},{provide:Fn,useValue:mc},{provide:En,useValue:i||[]},{provide:In,useValue:s||dc},{provide:F,useExisting:u.K0},{provide:Be,useFactory:Vc,deps:[t.Lbi]},An,Bt,Bn,Hn,{provide:Vn,useValue:r||B.LTR},K,le,rt,...Hc.forRoot().providers,j]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez]}),n})();var X=(()=>{return(n=X||(X={})).SVG="svg",n.FONT="font",X;var n})();class Zn{constructor(o,e,i={}){this.name=o,this.content=e,this.params=i}getClasses(o){const e=[];return this.params.packClass&&e.push(this.params.packClass),e.push(this.params.iconClassPrefix?`${this.params.iconClassPrefix}-${this.name}`:this.name),e}getContent(o){return this.content}}class Qn{constructor(o,e,i={}){this.name=o,this.content=e,this.params=i}getClasses(o){const e=[];return this.params.packClass&&e.push(this.params.packClass),e}getContent(o){return this.content}}function qn(n){throw Error(`Icon Pack '${n}' is not registered`)}function Jn(n,o,e){throw Error(`Pack '${n}' is not an '${e}' Pack and its type is '${o}'`)}let Kn=(()=>{class n{constructor(){this.packs=new Map}registerSvgPack(e,i,s={}){this.packs.set(e,{name:e,icons:new Map(Object.entries(i)),params:s,type:X.SVG})}registerFontPack(e,i={}){this.packs.set(e,{name:e,params:i,icons:new Map,type:X.FONT})}getPack(e){return this.packs.get(e)}setDefaultPack(e){this.packs.has(e)||qn(e),this.defaultPack=this.packs.get(e)}getSvgIcon(e,i){const s=i?this.getPackOrThrow(i):this.getDefaultPackOrThrow();s.type!==X.SVG&&Jn(s.name,s.type,"SVG");const r=this.getIconFromPack(e,s);return r?{name:e,pack:s.name,type:X.SVG,icon:this.createSvgIcon(e,r,s.params)}:null}getFontIcon(e,i){const s=i?this.getPackOrThrow(i):this.getDefaultPackOrThrow();s.type!==X.FONT&&Jn(s.name,s.type,"Font");const r=this.getIconFromPack(e,s)??"";return{name:e,pack:s.name,type:X.FONT,icon:this.createFontIcon(e,s.params.ligature?e:r,s.params)}}getIcon(e,i){return(i?this.getPackOrThrow(i):this.getDefaultPackOrThrow()).type===X.SVG?this.getSvgIcon(e,i):this.getFontIcon(e,i)}createSvgIcon(e,i,s){return i instanceof Qn?i:new Qn(e,i,s)}createFontIcon(e,i,s){return i instanceof Zn?i:new Zn(e,i,s)}getPackOrThrow(e){const i=this.packs.get(e);return i||qn(e),i}getDefaultPackOrThrow(){return this.defaultPack||function zc(){throw Error("Default pack is not registered.")}(),this.defaultPack}getIconFromPack(e,i){return i.icons.has(e)?i.icons.get(e):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),R=(()=>{class n{get primary(){return"primary"===this.status}get info(){return"info"===this.status}get success(){return"success"===this.status}get warning(){return"warning"===this.status}get danger(){return"danger"===this.status}get basic(){return"basic"===this.status}get control(){return"control"===this.status}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}get config(){return this._config}set config(e){e&&(this._config=e,"string"==typeof e?this.icon=e:(this.icon=e.icon,this.pack=e.pack,this.status=e.status,this.options=e.options))}constructor(e,i,s,r,a){this.sanitizer=e,this.iconLibrary=i,this.el=s,this.renderer=r,this.statusService=a,this.prevClasses=[],this.html=""}ngOnInit(){this.iconDef=this.renderIcon(this.icon,this.pack,this.options)}ngOnChanges(){this.iconLibrary.getIcon(this.icon,this.pack)?this.renderIcon(this.icon,this.pack,this.options):this.clearIcon()}renderIcon(e,i,s){const r=this.iconLibrary.getIcon(e,i);if(!r)return;const a=r.icon.getContent(s);return a&&(this.html=this.sanitizer.bypassSecurityTrustHtml(a)),this.assignClasses(r.icon.getClasses(s)),r}clearIcon(){this.html="",this.assignClasses([])}assignClasses(e){this.prevClasses.forEach(i=>{this.renderer.removeClass(this.el.nativeElement,i)}),e.forEach(i=>{this.renderer.addClass(this.el.nativeElement,i)}),this.prevClasses=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ge.H7),t.Y36(Kn),t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nb-icon"]],hostVars:17,hostBindings:function(e,i){2&e&&(t.Ikx("innerHtml",i.html,t.oJD),t.Tol(i.additionalClasses),t.ekj("status-primary",i.primary)("status-info",i.info)("status-success",i.success)("status-warning",i.warning)("status-danger",i.danger)("status-basic",i.basic)("status-control",i.control))},inputs:{icon:"icon",pack:"pack",options:"options",status:"status",config:"config"},features:[t.TTD],decls:0,vars:0,template:function(e,i){},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0}),n})(),Lc=(()=>{class n{constructor(e){this.iconsLibrary=e,this.essentialsPackName="nebular-essentials",!this.iconsLibrary.getPack(this.essentialsPackName)&&this.iconsLibrary.registerSvgPack(this.essentialsPackName,{"chevron-down-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-down"><rect width="24" height="24" opacity="0"/><path d="M12 15.5a1 1 0 0 1-.71-.29l-4-4a1 1 0 1 1 1.42-1.42L12 13.1l3.3-3.18a1 1 0 1 1 1.38 1.44l-4 3.86a1 1 0 0 1-.68.28z"/></g></g></svg>',"chevron-up-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M16 14.5a1 1 0 0 1-.71-.29L12 10.9l-3.3 3.18a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.42l4-3.86a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1 0 1.42 1 1 0 0 1-.69.28z"/></g></g></svg>',"chevron-left-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-left"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M13.36 17a1 1 0 0 1-.72-.31l-3.86-4a1 1 0 0 1 0-1.4l4-4a1 1 0 1 1 1.42 1.42L10.9 12l3.18 3.3a1 1 0 0 1 0 1.41 1 1 0 0 1-.72.29z"/></g></g></svg>',"chevron-right-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M10.5 17a1 1 0 0 1-.71-.29 1 1 0 0 1 0-1.42L13.1 12 9.92 8.69a1 1 0 0 1 0-1.41 1 1 0 0 1 1.42 0l3.86 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-.7.32z"/></g></g></svg>',"checkmark-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="checkmark"><rect width="24" height="24" opacity="0"/><path d="M9.86 18a1 1 0 0 1-.73-.32l-4.86-5.17a1 1 0 1 1 1.46-1.37l4.12 4.39 8.41-9.2a1 1 0 1 1 1.48 1.34l-9.14 10a1 1 0 0 1-.73.33z"/></g></g></svg>',"paper-plane-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="paper-plane"><rect width="24" height="24" opacity="0"/><path d="M21 4a1.31 1.31 0 0 0-.06-.27v-.09a1 1 0 0 0-.2-.3 1 1 0 0 0-.29-.19h-.09a.86.86 0 0 0-.31-.15H20a1 1 0 0 0-.3 0l-18 6a1 1 0 0 0 0 1.9l8.53 2.84 2.84 8.53a1 1 0 0 0 1.9 0l6-18A1 1 0 0 0 21 4zm-4.7 2.29l-5.57 5.57L5.16 10zM14 18.84l-1.86-5.57 5.57-5.57z"/></g></g></svg>',"file-text-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="file-text"><rect width="24" height="24" opacity="0"/><path d="M15 16H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2z"/><path d="M9 14h3a1 1 0 0 0 0-2H9a1 1 0 0 0 0 2z"/><path d="M19.74 8.33l-5.44-6a1 1 0 0 0-.74-.33h-7A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V9a1 1 0 0 0-.26-.67zM14 5l2.74 3h-2a.79.79 0 0 1-.74-.85zm3.44 15H6.56a.53.53 0 0 1-.56-.5v-15a.53.53 0 0 1 .56-.5H12v3.15A2.79 2.79 0 0 0 14.71 10H18v9.5a.53.53 0 0 1-.56.5z"/></g></g></svg>',"alert-triangle-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="alert-triangle"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M22.56 16.3L14.89 3.58a3.43 3.43 0 0 0-5.78 0L1.44 16.3a3 3 0 0 0-.05 3A3.37 3.37 0 0 0 4.33 21h15.34a3.37 3.37 0 0 0 2.94-1.66 3 3 0 0 0-.05-3.04zm-1.7 2.05a1.31 1.31 0 0 1-1.19.65H4.33a1.31 1.31 0 0 1-1.19-.65 1 1 0 0 1 0-1l7.68-12.73a1.48 1.48 0 0 1 2.36 0l7.67 12.72a1 1 0 0 1 .01 1.01z"/><circle cx="12" cy="16" r="1"/><path d="M12 8a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"/></g></g></svg>',"question-mark-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="question-mark"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M17 9A5 5 0 0 0 7 9a1 1 0 0 0 2 0 3 3 0 1 1 3 3 1 1 0 0 0-1 1v2a1 1 0 0 0 2 0v-1.1A5 5 0 0 0 17 9z"/><circle cx="12" cy="19" r="1"/></g></g></svg>',"email-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="email"><rect width="24" height="24" opacity="0"/><path d="M19 4H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-.67 2L12 10.75 5.67 6zM19 18H5a1 1 0 0 1-1-1V7.25l7.4 5.55a1 1 0 0 0 .6.2 1 1 0 0 0 .6-.2L20 7.25V17a1 1 0 0 1-1 1z"/></g></g></svg>',"flash-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="flash"><rect width="24" height="24" opacity="0"/><path d="M11.11 23a1 1 0 0 1-.34-.06 1 1 0 0 1-.65-1.05l.77-7.09H5a1 1 0 0 1-.83-1.56l7.89-11.8a1 1 0 0 1 1.17-.38 1 1 0 0 1 .65 1l-.77 7.14H19a1 1 0 0 1 .83 1.56l-7.89 11.8a1 1 0 0 1-.83.44zM6.87 12.8H12a1 1 0 0 1 .74.33 1 1 0 0 1 .25.78l-.45 4.15 4.59-6.86H12a1 1 0 0 1-1-1.11l.45-4.15z"/></g></g></svg>',"search-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="search"><rect width="24" height="24" opacity="0"/><path d="M20.71 19.29l-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 11a6 6 0 1 1 6 6 6 6 0 0 1-6-6z"/></g></g></svg>',"close-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="close"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g></svg>',"collapse-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="collapse"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 9h-2.58l3.29-3.29a1 1 0 1 0-1.42-1.42L15 7.57V5a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2z"/><path d="M10 13H5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L9 16.42V19a1 1 0 0 0 1 1 1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1z"/></g></g></svg>',"expand-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="expand"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20 5a1 1 0 0 0-1-1h-5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L18 7.42V10a1 1 0 0 0 1 1 1 1 0 0 0 1-1z"/><path d="M10.71 13.29a1 1 0 0 0-1.42 0L6 16.57V14a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2H7.42l3.29-3.29a1 1 0 0 0 0-1.42z"/></g></g></svg>',"minus-outline":'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="minus"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 13H5a1 1 0 0 1 0-2h14a1 1 0 0 1 0 2z"/></g></g></svg>',"minus-bold-outline":'<svg xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor" viewBox="0 0 8 2" width="100%" height="100%"><defs><rect id="nb-mbo" y="3" width="8" height="2" rx="1"/></defs><use xlink:href="#nb-mbo" transform="translate(0 -3)" fill-rule="evenodd"/></svg>',"checkmark-bold-outline":'<svg xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor" viewBox="0 0 8 7" width="100%" height="100%"><defs><path id="nb-cbo" d="M6.039 1.43a1.11 1.11 0 0 1 1.517-.228c.483.342.588.998.234 1.466L4.431 7.1a1 1 0 0 1-1.492.115L.317 4.677a1.023 1.023 0 0 1 .002-1.483 1.113 1.113 0 0 1 1.535.002l1.641 1.59L6.04 1.428z"/></defs><use xlink:href="#nb-cbo" transform="translate(0 -1)" fill-rule="evenodd"/></svg>',"arrow-back":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="arrow-back"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M19 11H7.14l3.63-4.36a1 1 0 1 0-1.54-1.28l-5 6a1.19 1.19 0 0 0-.09.15c0 .05 0 .08-.07.13A1 1 0 0 0 4 12a1 1 0 0 0 .07.36c0 .05 0 .08.07.13a1.19 1.19 0 0 0 .09.15l5 6A1 1 0 0 0 10 19a1 1 0 0 0 .64-.23 1 1 0 0 0 .13-1.41L7.14 13H19a1 1 0 0 0 0-2z"/></g></g></svg>'})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Kn))},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez]}),n})();function h(n){return"string"==typeof n?"true"===(n=n.toLowerCase().trim())||""===n:!!n}let ei=(()=>{class n{get filled(){return"filled"===this.appearance}set filled(e){h(e)&&(this.appearance="filled")}get outline(){return"outline"===this.appearance}set outline(e){h(e)&&(this.appearance="outline")}get ghost(){return"ghost"===this.appearance}set ghost(e){h(e)&&(this.appearance="ghost")}get fullWidth(){return this._fullWidth}set fullWidth(e){this._fullWidth=h(e)}get disabled(){return this._disabled}set disabled(e){this.disabled!==h(e)&&(this._disabled=!this.disabled,this.renderer.setProperty(this.hostElement.nativeElement,"disabled",this.disabled))}get tabbable(){return this.disabled?"-1":null==this.tabIndex?"0":this.tabIndex.toString()}get tiny(){return"tiny"===this.size}get small(){return"small"===this.size}get medium(){return"medium"===this.size}get large(){return"large"===this.size}get giant(){return"giant"===this.size}get rectangle(){return"rectangle"===this.shape}get round(){return"round"===this.shape}get semiRound(){return"semi-round"===this.shape}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}constructor(e,i,s,r,a){this.renderer=e,this.hostElement=i,this.cd=s,this.zone=r,this.statusService=a,this.size="medium",this.status="basic",this.shape="rectangle",this.appearance="filled",this._fullWidth=!1,this._disabled=!1,this.iconLeft=!1,this.iconRight=!1}ngAfterContentChecked(){const i=this.nodes[this.nodes.length-1];this.iconLeft=this.isIconExist(this.nodes[0]),this.iconRight=this.isIconExist(i)}ngAfterViewInit(){this.zone.runOutsideAngular(()=>setTimeout(()=>{this.renderer.addClass(this.hostElement.nativeElement,"nb-transition")}))}updateProperties(e){let i=!1;for(const s in e)e.hasOwnProperty(s)&&this[s]!==e[s]&&(this[s]=e[s],i=!0);i&&this.cd.markForCheck()}get iconElement(){return this.hostElement.nativeElement.querySelector("nb-icon")}get nodes(){return this.cd.rootNodes.filter(e=>e.nodeType!==Node.COMMENT_NODE)}isIconExist(e){return this.icons.some(i=>i.nativeElement===e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(j))},n.\u0275dir=t.lG2({type:n,contentQueries:function(e,i,s){if(1&e&&t.Suo(s,R,4,t.SBq),2&e){let r;t.iGM(r=t.CRH())&&(i.icons=r)}},hostVars:34,hostBindings:function(e,i){2&e&&(t.uIk("aria-disabled",i.disabled)("tabindex",i.tabbable),t.Tol(i.additionalClasses),t.ekj("appearance-filled",i.filled)("appearance-outline",i.outline)("appearance-ghost",i.ghost)("full-width",i.fullWidth)("btn-disabled",i.disabled)("size-tiny",i.tiny)("size-small",i.small)("size-medium",i.medium)("size-large",i.large)("size-giant",i.giant)("shape-rectangle",i.rectangle)("shape-round",i.round)("shape-semi-round",i.semiRound)("icon-start",i.iconLeft)("icon-end",i.iconRight))},inputs:{size:"size",status:"status",shape:"shape",appearance:"appearance",filled:"filled",outline:"outline",ghost:"ghost",fullWidth:"fullWidth",disabled:"disabled",tabIndex:"tabIndex"}}),n})(),Le=(()=>{class n extends ei{get hero(){return"hero"===this.appearance}set hero(e){h(e)&&(this.appearance="hero")}get primary(){return"primary"===this.status}get info(){return"info"===this.status}get success(){return"success"===this.status}get warning(){return"warning"===this.status}get danger(){return"danger"===this.status}get basic(){return"basic"===this.status}get control(){return"control"===this.status}onClick(e){this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}constructor(e,i,s,r,a){super(e,i,s,r,a),this.renderer=e,this.hostElement=i,this.cd=s,this.zone=r,this.statusService=a}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["button","nbButton",""],["a","nbButton",""],["input","type","button","nbButton",""],["input","type","submit","nbButton",""]],hostVars:16,hostBindings:function(e,i){1&e&&t.NdJ("click",function(r){return i.onClick(r)}),2&e&&t.ekj("appearance-hero",i.hero)("status-primary",i.primary)("status-info",i.info)("status-success",i.success)("status-warning",i.warning)("status-danger",i.danger)("status-basic",i.basic)("status-control",i.control)},inputs:{hero:"hero"},features:[t._Bn([{provide:ei,useExisting:n}]),t.qOj],attrs:rs,ngContentSelectors:k,decls:1,vars:0,template:function(e,i){1&e&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),sl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[at]}),n})();new t.OlP("NB_TIME_PICKER_CONFIG"),new t.OlP("Datepicker Adapter"),new t.OlP("Date service options"),new f.x,new E(1),new E(1),new E(1),new E(1),new E(1),new E(1),new E(1),new f.x,new f.x;let gt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Ut=(()=>{class n{get fullWidth(){return this._fullWidth}set fullWidth(e){this._fullWidth=h(e)}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}constructor(e,i,s,r,a){this.elementRef=e,this.focusMonitor=i,this.renderer=s,this.zone=r,this.statusService=a,this.destroy$=new f.x,this.fieldSize="medium",this.status="basic",this.shape="rectangle",this._fullWidth=!1,this.status$=new M.X(this.status),this.size$=new M.X(this.fieldSize),this.focused$=new M.X(!1),this.disabled$=new M.X(!1),this.fullWidth$=new M.X(this.fullWidth)}ngDoCheck(){const e=this.elementRef.nativeElement.disabled;e!==this.disabled$.value&&this.disabled$.next(e)}ngOnChanges({status:e,fieldSize:i,fullWidth:s}){e&&this.status$.next(this.status),i&&this.size$.next(this.fieldSize),s&&this.fullWidth$.next(this.fullWidth)}ngOnInit(){this.focusMonitor.monitor(this.elementRef).pipe((0,y.U)(e=>!!e),(0,Ke.x)(()=>this.focusMonitor.stopMonitoring(this.elementRef)),(0,d.R)(this.destroy$)).subscribe(this.focused$)}ngAfterViewInit(){this.zone.runOutsideAngular(()=>setTimeout(()=>{this.renderer.addClass(this.elementRef.nativeElement,"nb-transition")}))}ngOnDestroy(){this.destroy$.next()}get tiny(){return"tiny"===this.fieldSize}get small(){return"small"===this.fieldSize}get medium(){return"medium"===this.fieldSize}get large(){return"large"===this.fieldSize}get giant(){return"giant"===this.fieldSize}get primary(){return"primary"===this.status}get info(){return"info"===this.status}get success(){return"success"===this.status}get warning(){return"warning"===this.status}get danger(){return"danger"===this.status}get basic(){return"basic"===this.status}get control(){return"control"===this.status}get rectangle(){return"rectangle"===this.shape}get semiRound(){return"semi-round"===this.shape}get round(){return"round"===this.shape}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(He),t.Y36(t.Qsj),t.Y36(t.R0b),t.Y36(j))},n.\u0275dir=t.lG2({type:n,selectors:[["input","nbInput",""],["textarea","nbInput",""]],hostVars:34,hostBindings:function(e,i){2&e&&(t.Tol(i.additionalClasses),t.ekj("input-full-width",i.fullWidth)("size-tiny",i.tiny)("size-small",i.small)("size-medium",i.medium)("size-large",i.large)("size-giant",i.giant)("status-primary",i.primary)("status-info",i.info)("status-success",i.success)("status-warning",i.warning)("status-danger",i.danger)("status-basic",i.basic)("status-control",i.control)("shape-rectangle",i.rectangle)("shape-semi-round",i.semiRound)("shape-round",i.round))},inputs:{fieldSize:"fieldSize",status:"status",shape:"shape",fullWidth:"fullWidth"},features:[t._Bn([{provide:gt,useExisting:n}]),t.TTD]}),n})(),Zt=(()=>{class n{constructor(e,i){this.cd=e,this.domSanitizer=i,this.status="basic",this.inputFocus=!1,this.inputHover=!1,this.droppedFiles=[],this.imgDropTypes=["image/png","image/jpeg","image/gif"],this.message="",this.messagePlaceholder="Type a message",this.buttonTitle="",this.buttonIcon="paper-plane-outline",this.showButton=!0,this.dropFiles=!1,this.dropFilePlaceholder="Drop file to send",this.send=new t.vpe,this.onInputChange=new t.vpe,this.fileOver=!1}onDrop(e){if(this.dropFiles&&(e.preventDefault(),e.stopPropagation(),this.fileOver=!1,e.dataTransfer&&e.dataTransfer.files))for(const i of e.dataTransfer.files){const s=i;if(this.imgDropTypes.includes(i.type)){const r=new FileReader;r.onload=a=>{s.src=a.target.result,s.urlStyle=this.domSanitizer.bypassSecurityTrustStyle(`url(${s.src})`),this.cd.detectChanges()},r.readAsDataURL(i)}this.droppedFiles.push(s)}}removeFile(e){const i=this.droppedFiles.indexOf(e);i>=0&&this.droppedFiles.splice(i,1)}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.dropFiles&&(this.fileOver=!0)}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.dropFiles&&(this.fileOver=!1)}sendMessage(){(this.droppedFiles.length||String(this.message).trim().length)&&(this.send.emit({message:this.message,files:this.droppedFiles}),this.message="",this.droppedFiles=[])}setStatus(e){this.status!==e&&(this.status=e,this.cd.detectChanges())}getInputStatus(){return this.fileOver?this.getHighlightStatus():this.inputFocus||this.inputHover?this.status:"basic"}getButtonStatus(){return this.getHighlightStatus()}getHighlightStatus(){return"basic"===this.status||"control"===this.status?"primary":this.status}onModelChange(e){this.onInputChange.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(ge.H7))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nb-chat-form"]],hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("drop",function(r){return i.onDrop(r)})("dragover",function(r){return i.onDragOver(r)})("dragleave",function(r){return i.onDragLeave(r)}),2&e&&t.ekj("file-over",i.fileOver)},inputs:{message:"message",messagePlaceholder:"messagePlaceholder",buttonTitle:"buttonTitle",buttonIcon:"buttonIcon",showButton:"showButton",dropFiles:"dropFiles",dropFilePlaceholder:"dropFilePlaceholder"},outputs:{send:"send",onInputChange:"onInputChange"},decls:4,vars:7,consts:[["class","dropped-files",4,"ngIf"],[1,"message-row"],["nbInput","","fullWidth","","type","text",3,"status","ngModel","placeholder","focus","blur","mouseenter","mouseleave","ngModelChange","keyup.enter"],["nbButton","","class","send-button",3,"status","with-icon","click",4,"ngIf"],[1,"dropped-files"],[4,"ngFor","ngForOf"],[3,"background-image",4,"ngIf"],[4,"ngIf"],[1,"remove",3,"click"],["icon","file-text-outline","pack","nebular-essentials"],["nbButton","",1,"send-button",3,"status","click"],["pack","nebular-essentials",3,"icon",4,"ngIf","ngIfElse"],["title",""],["pack","nebular-essentials",3,"icon"]],template:function(e,i){1&e&&(t.YNc(0,$r,2,1,"div",0),t.TgZ(1,"div",1)(2,"input",2),t.NdJ("focus",function(){return i.inputFocus=!0})("blur",function(){return i.inputFocus=!1})("mouseenter",function(){return i.inputHover=!0})("mouseleave",function(){return i.inputHover=!1})("ngModelChange",function(r){return i.message=r})("ngModelChange",function(r){return i.onModelChange(r)})("keyup.enter",function(){return i.sendMessage()}),t.qZA(),t.YNc(3,jr,4,5,"button",3),t.qZA()),2&e&&(t.Q6J("ngIf",null==i.droppedFiles?null:i.droppedFiles.length),t.xp6(2),t.ekj("with-button",i.showButton),t.s9C("placeholder",i.fileOver?i.dropFilePlaceholder:i.messagePlaceholder),t.Q6J("status",i.getInputStatus())("ngModel",i.message),t.xp6(1),t.Q6J("ngIf",i.showButton))},dependencies:[u.sg,u.O5,W.Fj,W.JJ,W.On,R,Ut,Le],encapsulation:2,changeDetection:0}),n})(),Qt=(()=>{class n{constructor(){this.customMessages=new Map}register(e,i){this.customMessages.set(e,i)}unregister(e){return this.customMessages.delete(e)}getInstance(e){return this.customMessages.get(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),mt=(()=>{class n{constructor(){this.dateFormat="shortTime"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["nb-chat-message-text"]],inputs:{sender:"sender",message:"message",date:"date",dateFormat:"dateFormat"},decls:2,vars:2,consts:[["class","sender",4,"ngIf"],["class","text",4,"ngIf"],[1,"sender"],[1,"text"]],template:function(e,i){1&e&&(t.YNc(0,Yr,5,5,"p",0),t.YNc(1,Wr,2,1,"p",1)),2&e&&(t.Q6J("ngIf",i.sender||i.date),t.xp6(1),t.Q6J("ngIf",i.message))},dependencies:[u.O5,u.uU],encapsulation:2,changeDetection:0}),n})(),qt=(()=>{class n{set files(e){this.readyFiles=(e||[]).map(i=>{const s=this.isImage(i);return{...i,urlStyle:s&&this.domSanitizer.bypassSecurityTrustStyle(`url(${i.url})`),isImage:s}}),this.cd.detectChanges()}constructor(e,i){this.cd=e,this.domSanitizer=i,this.dateFormat="shortTime"}isImage(e){const i=e.type;return!!i&&["image/png","image/jpeg","image/gif"].includes(i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(ge.H7))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nb-chat-message-file"]],inputs:{message:"message",sender:"sender",date:"date",dateFormat:"dateFormat",files:"files"},decls:4,vars:7,consts:[[3,"sender","date","dateFormat","message"],[4,"ngIf"],[1,"message-content-group"],["target","_blank",3,"href",4,"ngFor","ngForOf"],["target","_blank",3,"href"],[3,"icon",4,"ngIf"],[3,"background-image",4,"ngIf"],[3,"icon"]],template:function(e,i){1&e&&(t.TgZ(0,"nb-chat-message-text",0),t._uU(1),t.qZA(),t.YNc(2,Qr,3,1,"ng-container",1),t.YNc(3,Kr,4,3,"ng-container",1)),2&e&&(t.Q6J("sender",i.sender)("date",i.date)("dateFormat",i.dateFormat)("message",i.message),t.xp6(1),t.hij(" ",i.message," "),t.xp6(1),t.Q6J("ngIf",(null==i.readyFiles?null:i.readyFiles.length)>1),t.xp6(1),t.Q6J("ngIf",1===(null==i.readyFiles?null:i.readyFiles.length)))},dependencies:[u.sg,u.O5,R,mt],encapsulation:2,changeDetection:0}),n})(),Di=(()=>{class n{constructor(){this.dateFormat="shortTime"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["nb-chat-message-quote"]],inputs:{message:"message",sender:"sender",date:"date",dateFormat:"dateFormat",quote:"quote"},decls:5,vars:4,consts:[["class","sender",4,"ngIf"],[1,"quote"],[3,"message"],[1,"sender"]],template:function(e,i){1&e&&(t.YNc(0,Xr,5,5,"p",0),t.TgZ(1,"p",1),t._uU(2),t.qZA(),t.TgZ(3,"nb-chat-message-text",2),t._uU(4),t.qZA()),2&e&&(t.Q6J("ngIf",i.sender||i.date),t.xp6(2),t.hij(" ",i.quote," "),t.xp6(1),t.Q6J("message",i.message),t.xp6(1),t.hij(" ",i.message," "))},dependencies:[u.O5,mt,u.uU],encapsulation:2,changeDetection:0}),n})();class Jt{}let xi=(()=>{class n{get file(){return{url:`https://maps.googleapis.com/maps/api/staticmap?center=${this.latitude},${this.longitude}&zoom=12&size=400x400&key=${this.mapKey}`,type:"image/png",icon:"location"}}constructor(e){this.dateFormat="shortTime",this.mapKey=e.messageGoogleMapKey}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Jt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nb-chat-message-map"]],inputs:{message:"message",sender:"sender",date:"date",dateFormat:"dateFormat",latitude:"latitude",longitude:"longitude"},decls:1,vars:7,consts:[[3,"files","message","sender","date","dateFormat"]],template:function(e,i){1&e&&t._UZ(0,"nb-chat-message-file",0),2&e&&t.Q6J("files",t.VKq(5,ea,i.file))("message",i.message)("sender",i.sender)("date",i.date)("dateFormat",i.dateFormat)},dependencies:[qt],encapsulation:2,changeDetection:0}),n})(),ki=(()=>{class n{constructor(){this.avatarClass=!0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["nb-chat-avatar"]],hostVars:4,hostBindings:function(e,i){2&e&&(t.Udp("background-image",i.avatarStyle),t.ekj("avatar",i.avatarClass))},inputs:{initials:"initials",avatarStyle:"avatarStyle"},decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,i){1&e&&t.YNc(0,ta,2,1,"ng-container",0),2&e&&t.Q6J("ngIf",!i.avatarStyle)},dependencies:[u.O5],encapsulation:2,changeDetection:0}),n})(),Kt=(()=>{class n{get _addReplyClass(){return this._areDefaultStylesEnabled()&&this.reply}get _addNotReplyClass(){return this._areDefaultStylesEnabled()&&this.notReply}get _addNoSpaceClass(){return this._areDefaultStylesEnabled()&&!this.message}get flyInOut(){return!0}get notReply(){return!this.reply}get reply(){return this._reply}set reply(e){this._reply=h(e)}set avatar(e){this.avatarStyle=e?this.domSanitizer.bypassSecurityTrustStyle(`url(${e})`):null}constructor(e,i){this.domSanitizer=e,this.customMessageService=i,this.builtInMessageTypes=["text","file","map","quote"],this._reply=!1}getInitials(){return this.sender?this.sender.split(" ").map(i=>i.charAt(0)).splice(0,2).join("").toUpperCase():""}_isBuiltInMessageType(){return null==this.type||this.builtInMessageTypes.includes(this.type)}_getTemplate(){return this.getCustomMessage(this.type).templateRef}_getTemplateContext(){return{$implicit:this.customMessageData,isReply:this.reply}}_areDefaultStylesEnabled(){return!this.getCustomMessage(this.type).noStyles}getCustomMessage(e){const i=this.customMessageService.getInstance(e);if(!i)throw new Error(`nb-chat: Can't find template for custom type '${e}'. Make sure you provide it in the chat component with *nbCustomMessage='${e}'.`);return i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ge.H7),t.Y36(Qt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nb-chat-message"]],hostVars:5,hostBindings:function(e,i){2&e&&(t.d8E("@flyInOut",i.flyInOut),t.ekj("not-reply",i.notReply)("reply",i.reply))},inputs:{reply:"reply",message:"message",sender:"sender",date:"date",dateFormat:"dateFormat",files:"files",quote:"quote",latitude:"latitude",longitude:"longitude",avatar:"avatar",type:"type",customMessageData:"customMessageData"},decls:5,vars:3,consts:[[3,"initials","avatarStyle",4,"ngIf"],[1,"message"],[3,"ngSwitch",4,"ngIf","ngIfElse"],["customTemplate",""],[3,"initials","avatarStyle"],[3,"ngSwitch"],[3,"sender","date","dateFormat","message","files",4,"ngSwitchCase"],[3,"sender","date","dateFormat","message","quote",4,"ngSwitchCase"],[3,"sender","date","message","latitude","longitude",4,"ngSwitchCase"],[3,"sender","date","dateFormat","message",4,"ngSwitchDefault"],[3,"sender","date","dateFormat","message","files"],[3,"sender","date","dateFormat","message","quote"],[3,"sender","date","message","latitude","longitude"],[3,"sender","date","dateFormat","message"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){if(1&e&&(t.YNc(0,na,1,2,"nb-chat-avatar",0),t.TgZ(1,"div",1),t.YNc(2,aa,5,4,"ng-container",2),t.qZA(),t.YNc(3,ca,3,16,"ng-template",null,3,t.W1O)),2&e){const s=t.MAs(4);t.Q6J("ngIf",i.notReply),t.xp6(2),t.Q6J("ngIf",i._isBuiltInMessageType())("ngIfElse",s)}},dependencies:[u.O5,u.tP,u.RF,u.n9,u.ED,mt,qt,Di,xi,ki],encapsulation:2,data:{animation:[(0,_.X$)("flyInOut",[(0,_.SB)("in",(0,_.oB)({transform:"translateX(0)"})),(0,_.eR)("void => *",[(0,_.oB)({transform:"translateX(-100%)"}),(0,_.jt)(80)]),(0,_.eR)("* => void",[(0,_.jt)(80,(0,_.oB)({transform:"translateX(100%)"}))])])]},changeDetection:0}),n})(),Pi=(()=>{class n{constructor(e){this.templateRef=e,this.context={}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["","nbChatTitle",""]],inputs:{context:"context"}}),n})(),Ri=(()=>{class n{get scrollBottom(){return this._scrollBottom}set scrollBottom(e){this._scrollBottom=h(e)}constructor(e){this.statusService=e,this.status="basic",this.noMessagesPlaceholder="No messages yet.",this._scrollBottom=!0}ngOnChanges(e){"status"in e&&this.updateFormStatus()}ngAfterContentInit(){this.updateFormStatus()}ngAfterViewInit(){this.messages.changes.subscribe(e=>{this.messages=e,this.updateView()}),this.updateView()}updateView(){this.scrollBottom&&this.scrollListBottom()}scrollListBottom(){this.scrollable.nativeElement.scrollTop=this.scrollable.nativeElement.scrollHeight}updateFormStatus(){this.chatForm&&this.chatForm.setStatus(this.status)}get tiny(){return"tiny"===this.size}get small(){return"small"===this.size}get medium(){return"medium"===this.size}get large(){return"large"===this.size}get giant(){return"giant"===this.size}get primary(){return"primary"===this.status}get success(){return"success"===this.status}get info(){return"info"===this.status}get warning(){return"warning"===this.status}get danger(){return"danger"===this.status}get basic(){return"basic"===this.status}get control(){return"control"===this.status}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nb-chat"]],contentQueries:function(e,i,s){if(1&e&&(t.Suo(s,Zt,5),t.Suo(s,Pi,5),t.Suo(s,Kt,4)),2&e){let r;t.iGM(r=t.CRH())&&(i.chatForm=r.first),t.iGM(r=t.CRH())&&(i.titleTemplate=r.first),t.iGM(r=t.CRH())&&(i.messages=r)}},viewQuery:function(e,i){if(1&e&&t.Gf(la,5),2&e){let s;t.iGM(s=t.CRH())&&(i.scrollable=s.first)}},hostVars:26,hostBindings:function(e,i){2&e&&(t.Tol(i.additionalClasses),t.ekj("size-tiny",i.tiny)("size-small",i.small)("size-medium",i.medium)("size-large",i.large)("size-giant",i.giant)("status-primary",i.primary)("status-success",i.success)("status-info",i.info)("status-warning",i.warning)("status-danger",i.danger)("status-basic",i.basic)("status-control",i.control))},inputs:{title:"title",size:"size",status:"status",noMessagesPlaceholder:"noMessagesPlaceholder",scrollBottom:"scrollBottom"},features:[t._Bn([Qt]),t.TTD],ngContentSelectors:ga,decls:11,vars:3,consts:[[1,"header"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["textTitleTemplate",""],[1,"scrollable"],["scrollable",""],[1,"messages"],["class","no-messages",4,"ngIf"],[1,"form"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"no-messages"]],template:function(e,i){if(1&e&&(t.F$t(pa),t.TgZ(0,"div",0),t.YNc(1,da,1,4,"ng-container",1),t.YNc(2,ua,1,1,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(4,"div",3,4)(6,"div",5),t.Hsn(7),t.YNc(8,ha,2,1,"p",6),t.qZA()(),t.TgZ(9,"div",7),t.Hsn(10,1),t.qZA()),2&e){const s=t.MAs(3);t.xp6(1),t.Q6J("ngIf",i.titleTemplate)("ngIfElse",s),t.xp6(7),t.Q6J("ngIf",!(null!=i.messages&&i.messages.length))}},dependencies:[u.O5,u.tP],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative;height:100%}"]}),n})(),kl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[at]}),n})(),Il=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:Jt,useValue:e||{}}]}}static forChild(e){return{ngModule:n,providers:[{provide:Jt,useValue:e||{}}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[at,Lc,kl,sl]}),n})();new t.OlP("Nebular Stepper Component"),(0,_.X$)("accordionItemBody",[(0,_.SB)("collapsed",(0,_.oB)({overflow:"hidden",visibility:"hidden",height:0})),(0,_.SB)("expanded",(0,_.oB)({overflow:"hidden",visibility:"visible"})),(0,_.eR)("collapsed => expanded",(0,_.jt)("100ms ease-in")),(0,_.eR)("expanded => collapsed",(0,_.jt)("100ms ease-out"))]),new t.OlP("NB_BUTTON_GROUP"),new t.OlP("NB_SORT_HEADER_COLUMN_DEF"),new t.OlP("Default dialog options"),(0,_.oB)({transform:"translateX({{ direction }}110%)",height:0,marginLeft:"0",marginRight:"0",marginTop:"0",marginBottom:"0"}),new t.OlP("Default toastr options"),new t.OlP("NB_SELECT_INJECTION_TOKEN"),new t.OlP("Nebular Window Content"),new t.OlP("Nebular Window Config"),new t.OlP("Nebular Window Context"),new t.OlP("NB_TREE_GRID");const xd=["chatroomList"];function kd(n,o){if(1&n&&(t.TgZ(0,"mat-list-option",7),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=o.first;t.Q6J("value",e)("selected",i),t.xp6(1),t.AsE(" ",e.name," (ID: ",e.id,") ")}}function Pd(n,o){if(1&n&&t._UZ(0,"nb-chat-message",8),2&n){const e=o.$implicit;t.Q6J("message",e.text)("sender",e.sender_username)("reply",e.out)("date",e.sent)}}const Rd=[{path:"",component:(()=>{class n{constructor(e,i){this.fb=e,this.service=i,this.chatrooms=new M.X([]),this.messages=new M.X([]),this.isTyping=new f.x,this.isTyping.asObservable().pipe(function po(n,o=_t.z,e){const i=(0,ie.H)(n,o);return function yt(n,o){return(0,Me.e)((e,i)=>{const{leading:s=!0,trailing:r=!1}=o??{};let a=!1,c=null,l=null,g=!1;const b=()=>{l?.unsubscribe(),l=null,r&&(x(),g&&i.complete())},S=()=>{l=null,g&&i.complete()},N=v=>l=(0,Ue.Xf)(n(v)).subscribe((0,he.x)(i,b,S)),x=()=>{if(a){a=!1;const v=c;c=null,i.next(v),!g&&N(v)}};e.subscribe((0,he.x)(i,v=>{a=!0,c=v,(!l||l.closed)&&(s?x():N(v))},()=>{g=!0,(!(r&&a&&l)||l.closed)&&i.complete()}))})}(()=>i,e)}(5e3),(0,I.w)(s=>(void 0!==this.service.state.chatroom&&this.service.send({msg_type:5,dialog_pk:this.service.state.chatroom.id.toString()}),(0,ie.H)(5e3)))).subscribe(s=>{void 0!==this.service.state.chatroom&&this.service.send({msg_type:10,dialog_pk:this.service.state.chatroom.id.toString()})})}ngOnInit(){}ngAfterViewInit(){this.reqChatrooms(),this.reqMessages(),this.service.receivedEvt$.subscribe(this.handleReceivedEvt.bind(this))}reqChatrooms(){this.service.reqChatrooms().pipe((0,Nt.K)(e=>(0,pe.of)(null))).subscribe(e=>{if(null==e)return;const i=e.data;this.chatrooms.next(i),i.length&&(this.service.state.chatroom=i[0])})}reqMessages(){this.service.reqMessages().pipe((0,Nt.K)(e=>(0,pe.of)(null))).subscribe(e=>{null!=e&&this.messages.next(e.data)})}handleReceivedEvt(e){if(null!=e)switch(e.msg_type){case 5:this.handleIsTypingEvt(e);break;case 10:this.handleTypingStoppedEvt(e);break;case 3:this.handleTextMessageEvt(e)}}selectChatroom(e){this.service.state.chatroom=e.options[0].value}onInputChange(e){this.isTyping.next(e),console.log(e)}sendMessage(e){void 0!==this.service.state.chatroom&&((e.files?e.files.map(s=>({url:s.src,type:s.type,icon:"file-text-outline"})):[]).length?this.service.send({msg_type:4,text:e.message,dialog_pk:this.service.state.chatroom.id.toString()}):this.service.send({msg_type:3,text:e.message,dialog_pk:this.service.state.chatroom.id.toString()}))}get chatrooms$(){return this.chatrooms.asObservable()}get messages$(){return this.messages.asObservable().pipe((0,y.U)(e=>e.filter(i=>parseInt(i.recipient)===this.service.state.chatroom?.id)))}get state(){return this.service.state}handleIsTypingEvt(e){}handleTypingStoppedEvt(e){}handleTextMessageEvt(e){this.messages.next([...this.messages.value,{id:e.random_id,text:e.text,sent:new Date,edited:new Date,read:!0,file:null,sender:e.sender,sender_username:e.sender_username,recipient:e.receiver,out:e.sender_username===this.state.self_username}])}static#e=this.\u0275fac=function(i){return new(i||n)(t.Y36(W.qu),t.Y36(To))};static#t=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-chatroom"]],viewQuery:function(i,s){if(1&i&&t.Gf(xd,5),2&i){let r;t.iGM(r=t.CRH())&&(s.chatroomList=r.first)}},decls:13,vars:11,consts:[[1,"nb-theme-default"],[3,"multiple","selectionChange"],["chatroomList",""],[3,"value","selected",4,"ngFor","ngForOf"],["scrollBottom","true",3,"title"],[3,"message","sender","reply","date",4,"ngFor","ngForOf"],[3,"dropFiles","send","onInputChange"],[3,"value","selected"],[3,"message","sender","reply","date"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div"),t._uU(4," Chat room list: "),t.TgZ(5,"mat-selection-list",1,2),t.NdJ("selectionChange",function(a){return s.selectChatroom(a)}),t.YNc(7,kd,2,4,"mat-list-option",3),t.ALo(8,"async"),t.qZA()(),t.TgZ(9,"nb-chat",4),t.YNc(10,Pd,1,4,"nb-chat-message",5),t.ALo(11,"async"),t.TgZ(12,"nb-chat-form",6),t.NdJ("send",function(a){return s.sendMessage(a)})("onInputChange",function(a){return s.onInputChange(a)}),t.qZA()()()),2&i&&(t.xp6(2),t.AsE(" Hello, ",s.state.self_username," (ID: ",s.state.self_id,") "),t.xp6(3),t.Q6J("multiple",!1),t.xp6(2),t.Q6J("ngForOf",t.lcZ(8,7,s.chatrooms$)),t.xp6(2),t.Q6J("title",(null==s.state.chatroom?null:s.state.chatroom.name)||"Untitled"),t.xp6(1),t.Q6J("ngForOf",t.lcZ(11,9,s.messages$)),t.xp6(2),t.Q6J("dropFiles",!0))},dependencies:[u.sg,dn.Ub,dn.vS,Ri,Kt,Zt,u.Ov]})}return n})()}];let Id=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[Q.Bz.forChild(Rd),Q.Bz]})}return n})();var Fd=m(363);let Ed=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({providers:[j,He],imports:[u.ez,W.UX,W.u5,Fd.q,$c.forRoot(),Il,Id]})}return n})()}}]);